import OperationOutputs from '@site/src/components/OperationOutputs';

# Conditional Branching

Fork operations enable workflows to select a branch based on a criteria.
They're equivalent to `if` / `match` expressions but allow for static rendering of the workflow as BPMN or flowchart diagrams.

## Binary Branching with matchCondition

For simple true/false conditions, use `matchCondition`:

```scala file=./main/scala/workflows4s/example/docs/ForkExample.scala start=start_match_condition end=end_match_condition
```

<OperationOutputs name="fork"/>

## N-Way Branching with onSome

For multi-way branching (more than two paths), use `onSome`. Each branch has a condition function that returns `Option[T]`. The first branch whose condition returns `Some(value)` is selected, and `value` is passed to that branch's workflow.

```scala file=./main/scala/workflows4s/example/docs/ForkExample.scala start=start_onsome end=end_onsome
```

<OperationOutputs name="fork-multiway" showBpmn={false}/>

Key points about `onSome`:
- Branches are evaluated in order of definition
- The first branch returning `Some(value)` wins and executes
- The extracted value is passed as input to the selected branch's workflow
- Use `Some(value)` as the last branch for a catch-all default
- Under the hood, `matchCondition` is implemented using two `onSome` calls

## Drafting Support

Branching comes with [drafting support](20-drafting.mdx).

```scala file=./main/scala/workflows4s/example/docs/draft/DraftForkExample.scala start=start_draft end=end_draft
```

<OperationOutputs name="draft-choice"/>